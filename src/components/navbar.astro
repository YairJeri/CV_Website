---
import Icon from "./icon.astro";

const navItems = [
    { href: "#home", label: "Home", icon: "/home.svg" },
    { href: "#about", label: "About", icon: "/about.svg" },
    { href: "#resume", label: "Resume", icon: "/resume.svg" },
    { href: "#contact", label: "Contact", icon: "/contact.svg" },
    { href: "#projects", label: "Projects", icon: "/portfolio.svg" },
    { href: "#skills", label: "Skills", icon: "/skills.svg" },
];

const socialLinks = [
    { href: "#", label: "Github", icon: "/github.svg" },
    { href: "#", label: "Linkedin", icon: "/linkedin.svg" },
];
---

<Icon
    id="menu-btn-close"
    src="/close.svg"
    class="w-4 h-4 text-contrast"
    classSpan="fixed lg:hidden z-50 top-4 right-4 w-10 h-10 bg-accent rounded-full flex items-center justify-center cursor-pointer opacity-0 scale-90 pointer-events-none transition-all duration-300"
/>

<Icon
    id="menu-btn"
    src="/menu.svg"
    class="w-4 h-4 text-contrast"
    classSpan="fixed lg:hidden z-50 top-4 right-4 w-10 h-10 bg-accent rounded-full flex items-center justify-center cursor-pointer opacity-100 scale-100 transition-all duration-300"
/>
<header
    id="menu"
    class="flex flex-col justify-center fixed top-1/2 lg:left-0 -left-full -translate-y-1/2 w-[300px] z-50 py-0 px-4 overflow-y-auto text-default transition-all duration-300 ease-in-out"
>
    <div
        class="flex flex-col items-center p-4 rounded-3xl bg-neutral-900 border-2 border-default/20"
    >
        <nav class="w-full p-0">
            {
                navItems.map((item, index) => (
                    <ul class="flex items-center w-full py-4 px-2.5 text-lg font-normal font-nav text-nav whitespace-nowrap duration-300">
                        <a
                            href={item.href}
                            class="group mr-2.5 text-xl hover:text-nav-hover active:text-nav-hover active:hover:text-nav-hover duration-300"
                        >
                            <Icon
                                src={item.icon}
                                class="mr-2.5 w-6 h-6 inline-block text-default group-hover:text-accent"
                            />
                            {item.label}
                        </a>
                    </ul>
                ))
            }
        </nav>

        <div class="text-center">
            {
                socialLinks.map((item, index) => (
                    <a
                        href={item.href}
                        class="group inline-flex items-center 
                        justify-center w-12 h-12 my-0 mx-0.5 text-lg
                         text-default rounded-4xl bg-default/10 duration-300
                         hover:text-contrast hover:bg-accent"
                    >
                        <Icon
                            src={item.icon}
                            class="w-8 h-8 text-default group-hover:text-black"
                        />
                    </a>
                ))
            }
        </div>
    </div>
    <script type="module">
        let isOpen = false;
        const btnClose = document.getElementById("menu-btn-close");
        const btn = document.getElementById("menu-btn");
        const menu = document.getElementById("menu");

        const toggleButton = (showBtn, hideBtn) => {
            showBtn.classList.remove(
                "opacity-0",
                "scale-90",
                "pointer-events-none",
            );
            showBtn.classList.add("opacity-100", "scale-100");

            hideBtn.classList.remove("opacity-100", "scale-100");
            hideBtn.classList.add(
                "opacity-0",
                "scale-90",
                "pointer-events-none",
            );
        };

        btn.addEventListener("click", () => {
            menu.classList.toggle("-left-full");
            menu.classList.toggle("left-0");
            toggleButton(btnClose, btn);
        });

        btnClose.addEventListener("click", () => {
            menu.classList.toggle("-left-full");
            menu.classList.toggle("left-0");
            toggleButton(btn, btnClose);
        });
    </script>
</header>
